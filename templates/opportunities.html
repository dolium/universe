{% extends "base.html" %}

{% block title %}Opportunities - {{ site_name }}{% endblock %}

{% block content %}
<section class="courses-hero">
  <div class="container">
    <h1>Opportunities</h1>
    <p>Jobs, events, study groups, and more submitted by the community</p>
    <div style="margin-top:16px; display:flex; gap:12px; flex-wrap:wrap; align-items:center; justify-content:center;">
      {% if opportunities_form_url %}
        <a class="btn btn-primary" target="_blank" rel="noopener" href="{{ opportunities_form_url }}">Add new opportunity</a>
      {% endif %}
      <form method="get" action="{{ url_for('opportunities') }}" style="display:flex; gap:10px; align-items:center;">
        <select name="type" onchange="this.form.submit()" class="btn small" style="background:var(--panel);border-color:#2a2b33;">
          <option value="">All types</option>
          {% for t in filters_types %}
            <option value="{{ t }}" {% if selected_type and selected_type|lower == t|lower %}selected{% endif %}>{{ t }}</option>
          {% endfor %}
        </select>
        <select name="programme" onchange="this.form.submit()" class="btn small" style="background:var(--panel);border-color:#2a2b33;">
          <option value="">All programmes</option>
          {% for p in filters_programmes %}
            <option value="{{ p }}" {% if selected_programme and selected_programme|lower == p|lower %}selected{% endif %}>{{ p }}</option>
          {% endfor %}
        </select>
        {% if selected_type or selected_programme %}
          <a class="btn small" href="{{ url_for('opportunities') }}">Reset</a>
        {% endif %}
      </form>
    </div>
    <p class="muted" style="margin-top:8px">Showing {{ opportunities|length }} of {{ total_count }} opportunities</p>
  </div>
</section>

<div class="container">
  <div class="courses-grid">
    {% for item in opportunities %}
    <div class="course-card">
      <div class="course-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 7h18" />
          <rect x="3" y="7" width="18" height="13" rx="2" ry="2" />
          <path d="M8 3v4" />
          <path d="M16 3v4" />
        </svg>
      </div>
      <h3 class="course-title">{{ item.title }}</h3>
      <p class="course-professor">{{ item.type }}{% if item.programme %} â€¢ {{ item.programme }}{% endif %}</p>
      <p class="course-description">{{ item.description }}</p>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
